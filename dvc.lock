schema: '2.0'
stages:
  data_cleaning:
    cmd: python src/data/data_cleaning.py
    deps:
    - path: data/raw/Zomato.csv
      hash: md5
      md5: 4fcb60f74c8b396078e8e77cf63f8824
      size: 6373412
    - path: src/data/data_cleaning.py
      hash: md5
      md5: ebeeb69aa1ca89fddba6fe7aa7eab059
      size: 9891
    outs:
    - path: data/cleaned/zomato_cleaned.csv
      hash: md5
      md5: 2a39aa81184c9372b1ab9d3ca54610b2
      size: 4457014
  data_preparation:
    cmd: python src/data/data_preparation.py
    deps:
    - path: data/cleaned/zomato_cleaned.csv
      hash: md5
      md5: 2a39aa81184c9372b1ab9d3ca54610b2
      size: 4457014
    - path: src/data/data_preparation.py
      hash: md5
      md5: d4bbc7b8c9bc4eb3d70220cb5bca9989
      size: 3018
    params:
      params.yaml:
        Data_Preparation.random_state: 42
        Data_Preparation.test_size: 0.2
    outs:
    - path: data/interim/test.csv
      hash: md5
      md5: 43642a7807aa0da5e9cd13a82aa0df70
      size: 891451
    - path: data/interim/train.csv
      hash: md5
      md5: 90e506f231adb5ec2e5a43a4be13bf1d
      size: 3562602
  data_preprocessing:
    cmd: python src/features/data_preprocessing.py
    deps:
    - path: data/interim/test.csv
      hash: md5
      md5: 43642a7807aa0da5e9cd13a82aa0df70
      size: 891451
    - path: data/interim/train.csv
      hash: md5
      md5: 90e506f231adb5ec2e5a43a4be13bf1d
      size: 3562602
    - path: src/features/data_preprocessing.py
      hash: md5
      md5: 6295abf039775e18f2e47c0c83293932
      size: 6768
    outs:
    - path: data/processed/test_trans.csv
      hash: md5
      md5: 7eacdcbfd76a28aa29fc55802a521811
      size: 891230
    - path: data/processed/train_trans.csv
      hash: md5
      md5: 9489d9478b4cbc659dcd62d91c312278
      size: 3529318
    - path: models/preprocessor.joblib
      hash: md5
      md5: 99116f30e9632d74466ecfcad79f66af
      size: 8284
  train:
    cmd: python src/models/train.py
    deps:
    - path: data/processed/train_trans.csv
      hash: md5
      md5: 9489d9478b4cbc659dcd62d91c312278
      size: 3529318
    - path: src/models/train.py
      hash: md5
      md5: 76cd0aa86e90c836bf53b921576ddb91
      size: 4892
    params:
      params.yaml:
        Train.LightGBM:
          n_estimators: 154
          max_depth: 27
          learning_rate: 0.22234435854395157
          subsample: 0.7592213724048168
          min_child_weight: 20
          min_split_gain: 0.004604680609280751
          reg_lambda: 97.81002379097947
          n_jobs: -1
        Train.Random_Forest:
          n_estimators: 479
          criterion: squared_error
          max_depth: 17
          max_features: 1
          min_samples_split: 9
          min_samples_leaf: 2
          max_samples: 0.6603673526197066
          verbose: 1
          n_jobs: -1
    outs:
    - path: models/model.joblib
      hash: md5
      md5: 86b74037f2e2ba4c98edecb74f02fb4e
      size: 131735208
    - path: models/power_transformer.joblib
      hash: md5
      md5: c2118d1c8f790188057b4b7248f2c74a
      size: 837
    - path: models/stacking_regressor.joblib
      hash: md5
      md5: af318c5df72da4d9866991061a4f3613
      size: 131723674
  evaluation:
    cmd: python src/models/model_evaluation.py
    deps:
    - path: data/processed/test_trans.csv
      hash: md5
      md5: 7eacdcbfd76a28aa29fc55802a521811
      size: 891230
    - path: data/processed/train_trans.csv
      hash: md5
      md5: 9489d9478b4cbc659dcd62d91c312278
      size: 3529318
    - path: models/model.joblib
      hash: md5
      md5: 86b74037f2e2ba4c98edecb74f02fb4e
      size: 131735208
    - path: src/models/model_evaluation.py
      hash: md5
      md5: 0514792f46a92eb14b2156868f50fdce
      size: 5980
    outs:
    - path: run_information.json
      hash: md5
      md5: 75d38053fc45d55bf826f2f3a8c1cf18
      size: 220
  model_registry:
    cmd: python src/models/model_registry.py
    deps:
    - path: run_information.json
      hash: md5
      md5: 75d38053fc45d55bf826f2f3a8c1cf18
      size: 220
    - path: src/models/model_registry.py
      hash: md5
      md5: 910a5bf0e92873e3e0098b0834e131ee
      size: 2126
